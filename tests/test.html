<!DOCTYPE HTML>
<html lang="en">

<head>
    <title>Test Format</title>
    <meta charset="utf-8">
    <script src="src/test-files.js"></script>
    <script src="../index.js"></script>
    <!-- <script src="//localhost:35750/livereload.js"></script> -->

    <style>
        html,
        body {
            height: 100%;
        }

        body {
            padding: 20px;
            font-family: sans-serif;
        }
    </style>
</head>

<body>
    <h1>Test Format</h1>

    <div id="mocha"></div>
    <div id="tests"></div>

    <script>
        window.mocha.setup('bdd');
        window.mocha.options.allowUncaught = true;

        describe('format', function () {
            this.timeout(3000);
            const describe = window.describe,
                test = window.test,
                expect = chai.expect,
                formatters = window.formatters;

            describe('formatters', () => {
                it('should format integers', () => {
                    const toHtml = formatters.integer.toHtml;
                    const from = formatters.integer.from;
                    expect(toHtml('a1')).to.equal('1');
                    expect(toHtml('1.1')).to.equal('1');
                    expect(toHtml('1.0')).to.equal('1');
                    expect(toHtml('-1.0')).to.equal('-1');
                    
                    expect(from('a1')).to.equal('1');
                });

                it('should format percentages', () => {
                    const toHtml = formatters.percentage.toHtml;
                    const from = formatters.percentage.from;
                    expect(toHtml('1')).to.equal('1%');
                    expect(toHtml('01')).to.equal('1%');
                    expect(toHtml('001')).to.equal('1%');
                    expect(toHtml('a1')).to.equal('1%');
                    expect(toHtml('1.1')).to.equal('1.1%');
                    expect(toHtml('1.0')).to.equal('1.0%');
                    expect(toHtml('1.00')).to.equal('1.00%');
                    expect(toHtml('1.000')).to.equal('1.000%');
                    expect(toHtml('-1.0')).to.equal('-1.0%');
                    
                    expect(from('1%')).to.equal('1');
                    expect(from('1.1%')).to.equal('1.1');
                    expect(from('1.00%')).to.equal('1.00');
                    expect(from('-10%')).to.equal('-10');
                });

                it('should format currency', () => {
                    const toHtml = formatters.currency.toHtml;
                    const from = formatters.currency.from;
                    expect(toHtml('1')).to.equal('$1.00');
                    expect(toHtml('1.001')).to.equal('$1.00');
                    expect(toHtml('1.01')).to.equal('$1.01');
                    expect(toHtml('1.009')).to.equal('$1.01');
                    expect(toHtml('-1')).to.equal('-$1.00');
                    expect(toHtml('.01')).to.equal('$0.01');
                    expect(toHtml('0.01')).to.equal('$0.01');

                    expect(toHtml('10')).to.equal('$10.00');
                    expect(toHtml('100')).to.equal('$100.00');
                    expect(toHtml('1000')).to.equal('$1,000.00');
                    expect(toHtml('10000.00')).to.equal('$10,000.00');
                    
                    expect(toHtml('-10')).to.equal('-$10.00');
                    expect(toHtml('-100')).to.equal('-$100.00');
                    expect(toHtml('-1000')).to.equal('-$1,000.00');
                    expect(toHtml('-10000.00')).to.equal('-$10,000.00');

                    expect(from('$1')).to.equal('1');
                    expect(from('$1.00')).to.equal('1.00');
                    expect(from('-$1.00')).to.equal('-1.00');
                });

                it('should format accounting', () => {
                    const toHtml = formatters.accounting.toHtml;
                    const from = formatters.accounting.from;
                    expect(toHtml('1')).to.equal('$1.00');
                    expect(toHtml('1.001')).to.equal('$1.00');
                    expect(toHtml('1.01')).to.equal('$1.01');
                    expect(toHtml('1.009')).to.equal('$1.01');
                    expect(toHtml('-1')).to.equal('($1.00)');
                    expect(toHtml('.01')).to.equal('$0.01');
                    expect(toHtml('0.01')).to.equal('$0.01');

                    expect(toHtml('1000')).to.equal('$1,000.00');
                    expect(toHtml('10000.00')).to.equal('$10,000.00');
                    
                    expect(toHtml('-10')).to.equal('($10.00)');
                    expect(toHtml('-100')).to.equal('($100.00)');
                    expect(toHtml('-1000')).to.equal('($1,000.00)');
                    expect(toHtml('-10000.00')).to.equal('($10,000.00)');

                    expect(from('$1')).to.equal('1');
                    expect(from('$1.00')).to.equal('1.00');
                    expect(from('-$1.00')).to.equal('-1.00');
                    expect(from('($1.00)')).to.equal('-1.00');
                });

                it('should format phone', () => {
                    const toHtml = formatters.phone.toHtml;
                    const from = formatters.phone.from;
                    expect(toHtml('1234567890')).to.equal('(123) 456-7890');
                    expect(toHtml('123456789')).to.equal('(123) 456-789');
                    expect(toHtml('aaa1234bbbb567890xxx')).to.equal('(123) 456-7890');

                    expect(from('1234567890')).to.equal('(123) 456-7890');
                    expect(from('(123) 456-7890')).to.equal('(123) 456-7890');
                });

                function test(format, input, output){
                    console.log(format(input));
                    expect(format(input)).to.equal(output);
                }
                it('should format titleCase', () => {
                    const toHtml = formatters.titleCase.toHtml;
                    const from = formatters.titleCase.from;

                    test(toHtml, 'mike is going downtown', 'Mike is Going Downtown');
                    test(toHtml, "i thiNk I won't do that now.", 'I Think I Won\'t do That Now.');
                    test(toHtml, "26 is the answer", '26 is the Answer');
                    test(toHtml, "  a very bad no no ", 'A Very Bad No No');
                    test(toHtml, "what is in the door to go to a no", 'What is in the Door to Go to a No');
                    // console.log(toHtml('mike is going downtown'));
                });
            });
        });

        window.mocha.run();


    </script>
</body>

</html>